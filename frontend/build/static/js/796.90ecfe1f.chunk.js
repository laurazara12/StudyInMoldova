"use strict";(self.webpackChunkstudy_in_moldova=self.webpackChunkstudy_in_moldova||[]).push([[796],{796:(e,s,d)=>{d.r(s),d.d(s,{default:()=>c});var r=d(43),a=d(213),t=d(768),i=d(16),l=d(375),n=d(579);const c=e=>{let{userData:s}=e;const[d,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)(!0),[m,_]=(0,r.useState)({desired_study_level:"",preferred_study_field:"",desired_academic_year:"",preferred_study_language:"",estimated_budget:"",accommodation_preferences:""}),[p,h]=(0,r.useState)({}),{setUserData:f,updateProfile:y}=(0,i.As)();(0,r.useEffect)((()=>{s&&(_({desired_study_level:s.desired_study_level||"",preferred_study_field:s.preferred_study_field||"",desired_academic_year:s.desired_academic_year||"",preferred_study_language:s.preferred_study_language||"",estimated_budget:s.estimated_budget||"",accommodation_preferences:s.accommodation_preferences||""}),u(!1))}),[s]);const g=(e,s)=>{switch(e){case"desired_study_level":return s?"":"Study level is required";case"preferred_study_field":return s?"":"Study field is required";case"desired_academic_year":return s?"":"Academic year is required";case"preferred_study_language":return s?"":"Study language is required";case"estimated_budget":return s?isNaN(s)||Number(s)<=0?"Budget must be a positive number":"":"Budget is required";case"accommodation_preferences":return s?"":"Accommodation preferences are required";default:return""}},x=()=>{const e=[{name:"phone",weight:1},{name:"date_of_birth",weight:1},{name:"country_of_origin",weight:1},{name:"nationality",weight:1},{name:"desired_study_level",weight:2},{name:"preferred_study_field",weight:2},{name:"desired_academic_year",weight:2},{name:"preferred_study_language",weight:2},{name:"estimated_budget",weight:1.5},{name:"accommodation_preferences",weight:1.5}],d=e.reduce(((e,s)=>e+s.weight),0);let r=0;return e.forEach((e=>{const d=null===s||void 0===s?void 0:s[e.name];if(d&&""!==d.toString().trim())if("estimated_budget"===e.name){const s=Number(d);!isNaN(s)&&s>0&&(r+=e.weight)}else r+=e.weight})),Math.round(r/d*100)},j=e=>{const{name:s,value:d}=e.target;_((e=>({...e,[s]:d})));const r=g(s,d);h((e=>({...e,[s]:r})))},v=async()=>{if((()=>{const e={};return Object.keys(m).forEach((s=>{const d=g(s,m[s]);d&&(e[s]=d)})),h(e),0===Object.keys(e).length})())try{var e;const s=await a.A.put(`${l.JR}/api/users/profile`,m,{headers:(0,l.z5)()});if(null!==(e=s.data)&&void 0!==e&&e.success){const e=s.data.data;c(!1),_({desired_study_level:e.desired_study_level||"",preferred_study_field:e.preferred_study_field||"",desired_academic_year:e.desired_academic_year||"",preferred_study_language:e.preferred_study_language||"",estimated_budget:e.estimated_budget||"",accommodation_preferences:e.accommodation_preferences||""}),y&&y(e),t.oR.success("Study plan updated successfully!")}}catch(s){console.error("Error updating study plan:",s),t.oR.error("An error occurred while updating the study plan.")}else t.oR.error("Please fill in all required fields correctly")},N=e=>{const d=null===s||void 0===s?void 0:s[e];if(!d)return!1;if("estimated_budget"===e){const e=Number(d);return!isNaN(e)&&e>0}return""!==d.toString().trim()};return o?(0,n.jsx)("div",{className:"plan-your-studies",children:(0,n.jsxs)("div",{className:"loading-container",children:[(0,n.jsx)("div",{className:"loading-spinner"}),(0,n.jsx)("p",{children:"Loading data..."})]})}):(0,n.jsxs)("div",{className:"plan-your-studies",children:[(0,n.jsxs)("div",{className:"plan-your-studies-content",children:[(0,n.jsxs)("div",{className:"profile-progress-container",children:[(0,n.jsxs)("div",{className:"profile-progress",children:[(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:`${x()}%`}})}),(0,n.jsxs)("span",{className:"progress-text",children:[x(),"% Completed"]})]}),x()<100&&(0,n.jsxs)("div",{className:"profile-recommendations",children:[(0,n.jsx)("h3",{children:"Recommendations for completing the profile"}),(0,n.jsx)("ul",{children:(()=>{const e=[];return[{name:"phone",text:"Add phone number"},{name:"date_of_birth",text:"Add date of birth"},{name:"country_of_origin",text:"Add country of origin"},{name:"nationality",text:"Add nationality"},{name:"desired_study_level",text:"Select desired study level"},{name:"preferred_study_field",text:"Add preferred study field"},{name:"desired_academic_year",text:"Select desired academic year"},{name:"preferred_study_language",text:"Select preferred study language"},{name:"estimated_budget",text:"Add estimated budget"},{name:"accommodation_preferences",text:"Add accommodation preferences"}].forEach((s=>{N(s.name)||e.push({text:s.text,completed:!1})})),e})().map(((e,s)=>(0,n.jsxs)("li",{className:e.completed?"completed":"",children:[(0,n.jsx)("span",{children:e.text}),e.completed&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]},s)))})]})]}),(0,n.jsxs)("div",{className:"study-plan-section",children:[(0,n.jsx)("h2",{children:"Plan Your Studies"}),(0,n.jsxs)("div",{className:"study-plan-details",children:[(0,n.jsxs)("div",{className:"study-plan-field "+(N("desired_study_level")?"completed":""),children:[(0,n.jsxs)("label",{children:["Desired Study Level:",N("desired_study_level")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===s||void 0===s?void 0:s.desired_study_level)||"Not specified"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("preferred_study_field")?"completed":""),children:[(0,n.jsxs)("label",{children:["Preferred Study Field:",N("preferred_study_field")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===s||void 0===s?void 0:s.preferred_study_field)||"Not specified"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("desired_academic_year")?"completed":""),children:[(0,n.jsxs)("label",{children:["Desired Academic Year:",N("desired_academic_year")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===s||void 0===s?void 0:s.desired_academic_year)||"Not specified"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("preferred_study_language")?"completed":""),children:[(0,n.jsxs)("label",{children:["Preferred Study Language:",N("preferred_study_language")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===s||void 0===s?void 0:s.preferred_study_language)||"Not specified"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("estimated_budget")?"completed":""),children:[(0,n.jsxs)("label",{children:["Estimated Budget:",N("estimated_budget")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:null!==s&&void 0!==s&&s.estimated_budget?`${s.estimated_budget} EUR`:"Not specified"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("accommodation_preferences")?"completed":""),children:[(0,n.jsxs)("label",{children:["Accommodation Preferences:",N("accommodation_preferences")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===s||void 0===s?void 0:s.accommodation_preferences)||"Not specified"})]})]}),(0,n.jsx)("button",{className:"edit-study-plan-button",onClick:()=>c(!0),children:"Edit Study Plan"})]})]}),d&&(0,n.jsx)("div",{className:"edit-study-plan-modal",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("h2",{children:"Edit Study Plan"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v()},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Desired Study Level: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"desired_study_level",value:m.desired_study_level,onChange:j,className:p.desired_study_level?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Select Level"}),(0,n.jsx)("option",{value:"Bachelor",children:"Bachelor"}),(0,n.jsx)("option",{value:"Master",children:"Master"}),(0,n.jsx)("option",{value:"PhD",children:"PhD"})]}),p.desired_study_level&&(0,n.jsx)("span",{className:"error-message",children:p.desired_study_level})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Preferred Study Field: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"preferred_study_field",value:m.preferred_study_field,onChange:j,placeholder:"Enter study field",className:p.preferred_study_field?"error":""}),p.preferred_study_field&&(0,n.jsx)("span",{className:"error-message",children:p.preferred_study_field})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Desired Academic Year: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"desired_academic_year",value:m.desired_academic_year,onChange:j,placeholder:"Enter academic year",className:p.desired_academic_year?"error":""}),p.desired_academic_year&&(0,n.jsx)("span",{className:"error-message",children:p.desired_academic_year})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Preferred Study Language: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"preferred_study_language",value:m.preferred_study_language,onChange:j,className:p.preferred_study_language?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Select Language"}),(0,n.jsx)("option",{value:"English",children:"English"}),(0,n.jsx)("option",{value:"Romanian",children:"Romanian"}),(0,n.jsx)("option",{value:"Russian",children:"Russian"})]}),p.preferred_study_language&&(0,n.jsx)("span",{className:"error-message",children:p.preferred_study_language})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Estimated Budget (EUR): ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"number",name:"estimated_budget",value:m.estimated_budget,onChange:j,placeholder:"Enter budget",min:"0",className:p.estimated_budget?"error":""}),p.estimated_budget&&(0,n.jsx)("span",{className:"error-message",children:p.estimated_budget})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Accommodation Preferences: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"accommodation_preferences",value:m.accommodation_preferences,onChange:j,className:p.accommodation_preferences?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Select Preference"}),(0,n.jsx)("option",{value:"Dormitory",children:"Dormitory"}),(0,n.jsx)("option",{value:"Private Apartment",children:"Private Apartment"}),(0,n.jsx)("option",{value:"Shared Apartment",children:"Shared Apartment"})]}),p.accommodation_preferences&&(0,n.jsx)("span",{className:"error-message",children:p.accommodation_preferences})]}),(0,n.jsxs)("div",{className:"modal-buttons",children:[(0,n.jsx)("button",{type:"submit",className:"save-button",children:"Save"}),(0,n.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})}}}]);
//# sourceMappingURL=796.90ecfe1f.chunk.js.map