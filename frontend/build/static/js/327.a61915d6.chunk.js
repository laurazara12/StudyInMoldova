"use strict";(self.webpackChunkstudy_in_moldova=self.webpackChunkstudy_in_moldova||[]).push([[327],{327:(e,a,i)=>{i.r(a),i.d(a,{default:()=>s});var n=i(43),o=i(375),r=i(213),l=i(768),d=(i(637),i(579));const s=e=>{let{userData:a,onProfileUpdate:i}=e;const[s,t]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)({name:(null===a||void 0===a?void 0:a.name)||"",email:(null===a||void 0===a?void 0:a.email)||"",phone:(null===a||void 0===a?void 0:a.phone)||"",phone_code:(null===a||void 0===a?void 0:a.phone_code)||"+373",country_of_origin:(null===a||void 0===a?void 0:a.country_of_origin)||"",date_of_birth:(null===a||void 0===a?void 0:a.date_of_birth)||"",nationality:(null===a||void 0===a?void 0:a.nationality)||"",desired_study_level:(null===a||void 0===a?void 0:a.desired_study_level)||"",preferred_study_field:(null===a||void 0===a?void 0:a.preferred_study_field)||"",desired_academic_year:(null===a||void 0===a?void 0:a.desired_academic_year)||"",preferred_study_language:(null===a||void 0===a?void 0:a.preferred_study_language)||"",estimated_budget:(null===a||void 0===a?void 0:a.estimated_budget)||"",accommodation_preferences:(null===a||void 0===a?void 0:a.accommodation_preferences)||""}),[p,v]=(0,n.useState)({}),f=["Afganistan","Africa de Sud","Albania","Algeria","Andorra","Angola","Antigua \u0219i Barbuda","Argentina","Armenia","Australia","Austria","Azerbaidjan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgia","Belize","Benin","Bhutan","Birmania","Bolivia","Bosnia \u0219i Her\u021begovina","Botswana","Brazilia","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodgia","Camerun","Canada","Capul Verde","Cehia","Chile","China","Cipru","Coasta de Filde\u0219","Columbia","Comore","Congo","Coreea de Nord","Coreea de Sud","Costa Rica","Croa\u021bia","Cuba","Danemarca","Djibouti","Dominica","Ecuador","Egipt","El Salvador","Elve\u021bia","Emiratele Arabe Unite","Eritreea","Estonia","Eswatini","Etiopia","Fiji","Filipine","Finlanda","Fran\u021ba","Gabon","Gambia","Georgia","Germania","Ghana","Grecia","Grenada","Guatemala","Guineea","Guineea-Bissau","Guineea Ecuatorial\u0103","Guyana","Haiti","Honduras","India","Indonezia","Iordania","Irak","Iran","Irlanda","Islanda","Israel","Italia","Jamaica","Japonia","Kazahstan","Kenya","Kiribati","K\xe2rg\xe2zstan","Kosovo","Kuweit","Laos","Lesotho","Letonia","Liban","Liberia","Libia","Liechtenstein","Lituania","Luxemburg","Macedonia de Nord","Madagascar","Malawi","Malaysia","Maldive","Mali","Malta","Maroc","Marshall","Mauritania","Mauritius","Mexic","Micronezia","Moldova","Monaco","Mongolia","Muntenegru","Mozambic","Namibia","Nauru","Nepal","Nicaragua","Niger","Nigeria","Norvegia","Noua Zeeland\u0103","Oman","Pakistan","Palau","Palestina","Panama","Papua Noua Guinee","Paraguay","Peru","Polonia","Portugalia","Qatar","Regatul Unit","Republica Centrafrican\u0103","Republica Dominican\u0103","Rom\xe2nia","Rwanda","Rusia","Saint Kitts \u0219i Nevis","Saint Lucia","Saint Vincent \u0219i Grenadine","Samoa","San Marino","S\xe3o Tom\xe9 \u0219i Pr\xedncipe","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Siria","Slovacia","Slovenia","Solomon","Somalia","Spania","Sri Lanka","Statele Unite ale Americii","Sudan","Sudanul de Sud","Suedia","Surinam","Tadjikistan","Tanzania","Thailanda","Timorul de Est","Togo","Tonga","Trinidad \u0219i Tobago","Tunisia","Turcia","Turkmenistan","Tuvalu","Ucraina","Uganda","Ungaria","Uruguay","Uzbekistan","Vanuatu","Vatican","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],_=[{code:"+373",country:"Moldova"},{code:"+40",country:"Rom\xe2nia"},{code:"+380",country:"Ucraina"},{code:"+7",country:"Rusia"},{code:"+375",country:"Belarus"},{code:"+359",country:"Bulgaria"},{code:"+381",country:"Serbia"},{code:"+385",country:"Croa\u021bia"},{code:"+386",country:"Slovenia"},{code:"+421",country:"Slovacia"},{code:"+420",country:"Cehia"},{code:"+48",country:"Polonia"},{code:"+36",country:"Ungaria"},{code:"+43",country:"Austria"},{code:"+49",country:"Germania"},{code:"+33",country:"Fran\u021ba"},{code:"+39",country:"Italia"},{code:"+34",country:"Spania"},{code:"+351",country:"Portugalia"},{code:"+30",country:"Grecia"},{code:"+90",country:"Turcia"},{code:"+995",country:"Georgia"},{code:"+374",country:"Armenia"},{code:"+994",country:"Azerbaidjan"},{code:"+7",country:"Kazahstan"},{code:"+996",country:"K\xe2rg\xe2zstan"},{code:"+992",country:"Tadjikistan"},{code:"+998",country:"Uzbekistan"},{code:"+44",country:"Regatul Unit"},{code:"+1",country:"Statele Unite \u0219i Canada"},{code:"+86",country:"China"},{code:"+81",country:"Japonia"},{code:"+82",country:"Coreea de Sud"},{code:"+91",country:"India"},{code:"+61",country:"Australia"},{code:"+64",country:"Noua Zeeland\u0103"},{code:"+27",country:"Africa de Sud"},{code:"+20",country:"Egipt"},{code:"+212",country:"Maroc"},{code:"+234",country:"Nigeria"},{code:"+254",country:"Kenya"},{code:"+55",country:"Brazilia"},{code:"+54",country:"Argentina"},{code:"+52",country:"Mexic"}];(0,n.useEffect)((()=>{s&&h({name:(null===a||void 0===a?void 0:a.name)||"",email:(null===a||void 0===a?void 0:a.email)||"",phone:(null===a||void 0===a?void 0:a.phone)||"",phone_code:(null===a||void 0===a?void 0:a.phone_code)||"+373",country_of_origin:(null===a||void 0===a?void 0:a.country_of_origin)||"",date_of_birth:(null===a||void 0===a?void 0:a.date_of_birth)||"",nationality:(null===a||void 0===a?void 0:a.nationality)||"",desired_study_level:(null===a||void 0===a?void 0:a.desired_study_level)||"",preferred_study_field:(null===a||void 0===a?void 0:a.preferred_study_field)||"",desired_academic_year:(null===a||void 0===a?void 0:a.desired_academic_year)||"",preferred_study_language:(null===a||void 0===a?void 0:a.preferred_study_language)||"",estimated_budget:(null===a||void 0===a?void 0:a.estimated_budget)||"",accommodation_preferences:(null===a||void 0===a?void 0:a.accommodation_preferences)||""})}),[s,a]),(0,n.useEffect)((()=>{if(s&&null!==a&&void 0!==a&&a.phone){const e=a.phone;let i="+373",n=e;for(const{code:a}of _)if(e.startsWith(a)){i=a,n=e.slice(a.length);break}h({...a,phone_code:i,phone:n})}}),[s,a]);const g=e=>{const{name:a,value:i}=e.target;h((e=>({...e,[a]:i}))),p[a]&&v((e=>({...e,[a]:""})))},y=async e=>{if(e.preventDefault(),(()=>{const e={};if(m.name||(e.name="Numele este obligatoriu"),m.email||(e.email="Email-ul este obligatoriu"),m.phone||(e.phone="Telefonul este obligatoriu"),m.country_of_origin||(e.country_of_origin="\u021aara este obligatorie"),m.phone){const a=m.phone.replace(/^0+/,"");(a.length<8||a.length>15)&&(e.phone="Num\u0103rul de telefon trebuie s\u0103 aib\u0103 \xeentre 8 \u0219i 15 cifre"),/^\d+$/.test(a)||(e.phone="Num\u0103rul de telefon trebuie s\u0103 con\u021bin\u0103 doar cifre")}return v(e),0===Object.keys(e).length})())try{var a;u(!0);const e={...m,phone:m.phone_code+m.phone.replace(/^0+/,"")};delete e.phone_code;const n=await r.A.put(`${o.JR}/api/users/profile`,e,{headers:(0,o.z5)()});if(null===(a=n.data)||void 0===a||!a.success)throw new Error(n.data.message||"Eroare la actualizarea profilului");if(l.oR.success("Profilul a fost actualizat cu succes"),t(!1),i){const a={...n.data.data,phone:e.phone};i(a)}}catch(n){console.error("Eroare la actualizarea profilului:",n),l.oR.error((0,o.hS)(n))}finally{u(!1)}};return(0,d.jsxs)("div",{className:"profile-tab",children:[(0,d.jsxs)("div",{className:"profile-info",children:[(0,d.jsx)("div",{className:"profile-header",children:(0,d.jsx)("h2",{children:"Informa\u021bii Personale"})}),(0,d.jsx)("button",{className:"edit-button",onClick:()=>t(!0),children:"Editeaz\u0103 Profilul"}),(0,d.jsxs)("div",{className:"info-grid",children:[(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Nume Complet:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.name)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Email:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.email)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Telefon:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.phone)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Data Na\u0219terii:"}),(0,d.jsx)("span",{children:null!==a&&void 0!==a&&a.date_of_birth?new Date(a.date_of_birth).toLocaleDateString("ro-RO"):"Nespecificat\u0103"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"\u021aara de Origine:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.country_of_origin)||"Nespecificat\u0103"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Na\u021bionalitate:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.nationality)||"Nespecificat\u0103"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Nivelul de Studiu Dorit:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_study_level)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Domeniul Preferat:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_field)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Anul Academic Dorit:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_academic_year)||"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Limba de Studiu Preferat\u0103:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_language)||"Nespecificat\u0103"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Buget Estimat:"}),(0,d.jsx)("span",{children:null!==a&&void 0!==a&&a.estimated_budget?`${a.estimated_budget} EUR`:"Nespecificat"})]}),(0,d.jsxs)("div",{className:"info-item",children:[(0,d.jsx)("label",{children:"Preferin\u021be Cazare:"}),(0,d.jsx)("span",{children:(null===a||void 0===a?void 0:a.accommodation_preferences)||"Nespecificate"})]})]})]}),s?(0,d.jsx)("div",{className:"edit-modal",children:(0,d.jsxs)("div",{className:"edit-modal-content",children:[(0,d.jsx)("button",{className:"close-modal-button",onClick:()=>t(!1),children:"\xd7"}),(0,d.jsx)("h2",{children:"Editare Profil"}),(0,d.jsxs)("form",{onSubmit:y,children:[(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h3",{children:"Informa\u021bii Personale"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:["Nume Complet: ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{type:"text",name:"name",value:m.name,onChange:g,required:!0,className:p.name?"error":""}),p.name&&(0,d.jsx)("span",{className:"error-message",children:p.name})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:["Email: ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsx)("input",{type:"email",name:"email",value:m.email,onChange:g,required:!0,className:p.email?"error":""}),p.email&&(0,d.jsx)("span",{className:"error-message",children:p.email})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:["Telefon: ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsxs)("div",{className:"phone-input-group",children:[(0,d.jsx)("select",{name:"phone_code",value:m.phone_code,onChange:g,className:"phone-code-select",children:_.map((e=>{let{code:a,country:i}=e;return(0,d.jsxs)("option",{value:a,children:[a," (",i,")"]},a)}))}),(0,d.jsx)("input",{type:"tel",name:"phone",value:m.phone,onChange:g,placeholder:"Num\u0103r de telefon",className:p.phone?"error":""})]}),p.phone&&(0,d.jsx)("span",{className:"error-message",children:p.phone})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:["\u021aara: ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsxs)("select",{name:"country_of_origin",value:m.country_of_origin,onChange:g,className:p.country_of_origin?"error":"",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Selecteaz\u0103 \u021bara"}),f.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))]}),p.country_of_origin&&(0,d.jsx)("span",{className:"error-message",children:p.country_of_origin})]})]}),(0,d.jsxs)("div",{className:"form-section",children:[(0,d.jsx)("h3",{children:"Informa\u021bii Academice"}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Data Na\u0219terii:"}),(0,d.jsx)("input",{type:"date",name:"date_of_birth",value:m.date_of_birth,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Na\u021bionalitate:"}),(0,d.jsx)("input",{type:"text",name:"nationality",value:m.nationality,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Nivelul de Studiu Dorit:"}),(0,d.jsx)("input",{type:"text",name:"desired_study_level",value:m.desired_study_level,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Domeniul Preferat:"}),(0,d.jsx)("input",{type:"text",name:"preferred_study_field",value:m.preferred_study_field,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Anul Academic Dorit:"}),(0,d.jsx)("input",{type:"text",name:"desired_academic_year",value:m.desired_academic_year,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Limba de Studiu Preferat\u0103:"}),(0,d.jsx)("input",{type:"text",name:"preferred_study_language",value:m.preferred_study_language,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Buget Estimat (EUR):"}),(0,d.jsx)("input",{type:"number",name:"estimated_budget",value:m.estimated_budget,onChange:g})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Preferin\u021be Cazare:"}),(0,d.jsx)("textarea",{name:"accommodation_preferences",value:m.accommodation_preferences,onChange:g})]})]}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"submit",className:"save-button",disabled:c,children:c?"Se salveaz\u0103...":"Salveaz\u0103 Modific\u0103rile"}),(0,d.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>t(!1),disabled:c,children:"Anuleaz\u0103"})]})]})]})}):null]})}}}]);
//# sourceMappingURL=327.a61915d6.chunk.js.map