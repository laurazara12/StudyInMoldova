"use strict";(self.webpackChunkstudy_in_moldova=self.webpackChunkstudy_in_moldova||[]).push([[796],{796:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var r=s(43),d=s(213),i=s(768),t=s(16),l=s(375),n=s(579);const c=e=>{let{userData:a}=e;const[s,c]=(0,r.useState)(!1),[u,o]=(0,r.useState)(!0),[m,_]=(0,r.useState)({desired_study_level:"",preferred_study_field:"",desired_academic_year:"",preferred_study_language:"",estimated_budget:"",accommodation_preferences:""}),[p,h]=(0,r.useState)({}),{setUserData:f,updateProfile:g}=(0,t.As)();(0,r.useEffect)((()=>{a&&(_({desired_study_level:a.desired_study_level||"",preferred_study_field:a.preferred_study_field||"",desired_academic_year:a.desired_academic_year||"",preferred_study_language:a.preferred_study_language||"",estimated_budget:a.estimated_budget||"",accommodation_preferences:a.accommodation_preferences||""}),o(!1))}),[a]);const x=(e,a)=>{switch(e){case"desired_study_level":return a?"":"Nivelul de studiu este obligatoriu";case"preferred_study_field":return a?"":"Domeniul de studiu este obligatoriu";case"desired_academic_year":return a?"":"Anul academic este obligatoriu";case"preferred_study_language":return a?"":"Limba de studiu este obligatorie";case"estimated_budget":return a?isNaN(a)||Number(a)<=0?"Bugetul trebuie s\u0103 fie un num\u0103r pozitiv":"":"Bugetul este obligatoriu";case"accommodation_preferences":return a?"":"Preferin\u021bele de cazare sunt obligatorii";default:return""}},j=()=>{const e=[{name:"phone",weight:1},{name:"date_of_birth",weight:1},{name:"country_of_origin",weight:1},{name:"nationality",weight:1},{name:"desired_study_level",weight:2},{name:"preferred_study_field",weight:2},{name:"desired_academic_year",weight:2},{name:"preferred_study_language",weight:2},{name:"estimated_budget",weight:1.5},{name:"accommodation_preferences",weight:1.5}],s=e.reduce(((e,a)=>e+a.weight),0);let r=0;return e.forEach((e=>{const s=null===a||void 0===a?void 0:a[e.name];if(s&&""!==s.toString().trim())if("estimated_budget"===e.name){const a=Number(s);!isNaN(a)&&a>0&&(r+=e.weight)}else r+=e.weight})),Math.round(r/s*100)},y=e=>{const{name:a,value:s}=e.target;_((e=>({...e,[a]:s})));const r=x(a,s);h((e=>({...e,[a]:r})))},v=async()=>{if((()=>{const e={};return Object.keys(m).forEach((a=>{const s=x(a,m[a]);s&&(e[a]=s)})),h(e),0===Object.keys(e).length})())try{var e;const a=await d.A.put(`${l.JR}/api/users/profile`,m,{headers:(0,l.z5)()});if(null!==(e=a.data)&&void 0!==e&&e.success){const e=a.data.data;c(!1),_({desired_study_level:e.desired_study_level||"",preferred_study_field:e.preferred_study_field||"",desired_academic_year:e.desired_academic_year||"",preferred_study_language:e.preferred_study_language||"",estimated_budget:e.estimated_budget||"",accommodation_preferences:e.accommodation_preferences||""}),g&&g(e),i.oR.success("Planul de studii a fost actualizat cu succes!")}}catch(a){console.error("Error updating study plan:",a),i.oR.error("A ap\u0103rut o eroare la actualizarea planului de studii.")}else i.oR.error("V\u0103 rug\u0103m s\u0103 completa\u021bi toate c\xe2mpurile obligatorii corect")},N=e=>{const s=null===a||void 0===a?void 0:a[e];if(!s)return!1;if("estimated_budget"===e){const e=Number(s);return!isNaN(e)&&e>0}return""!==s.toString().trim()};return u?(0,n.jsx)("div",{className:"plan-your-studies",children:(0,n.jsxs)("div",{className:"loading-container",children:[(0,n.jsx)("div",{className:"loading-spinner"}),(0,n.jsx)("p",{children:"Se \xeencarc\u0103 datele..."})]})}):(0,n.jsxs)("div",{className:"plan-your-studies",children:[(0,n.jsxs)("div",{className:"plan-your-studies-content",children:[(0,n.jsxs)("div",{className:"profile-progress-container",children:[(0,n.jsxs)("div",{className:"profile-progress",children:[(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:`${j()}%`}})}),(0,n.jsxs)("span",{className:"progress-text",children:[j(),"% Complet"]})]}),j()<100&&(0,n.jsxs)("div",{className:"profile-recommendations",children:[(0,n.jsx)("h3",{children:"Recomand\u0103ri pentru completarea profilului"}),(0,n.jsx)("ul",{children:(()=>{const e=[];return[{name:"phone",text:"Ad\u0103uga\u021bi num\u0103rul de telefon"},{name:"date_of_birth",text:"Ad\u0103uga\u021bi data na\u0219terii"},{name:"country_of_origin",text:"Ad\u0103uga\u021bi \u021bara de origine"},{name:"nationality",text:"Ad\u0103uga\u021bi na\u021bionalitatea"},{name:"desired_study_level",text:"Selecta\u021bi nivelul de studiu dorit"},{name:"preferred_study_field",text:"Ad\u0103uga\u021bi domeniul de studiu preferat"},{name:"desired_academic_year",text:"Selecta\u021bi anul academic dorit"},{name:"preferred_study_language",text:"Selecta\u021bi limba de studiu preferat\u0103"},{name:"estimated_budget",text:"Ad\u0103uga\u021bi bugetul estimat"},{name:"accommodation_preferences",text:"Ad\u0103uga\u021bi preferin\u021bele de cazare"}].forEach((a=>{N(a.name)||e.push({text:a.text,completed:!1})})),e})().map(((e,a)=>(0,n.jsxs)("li",{className:e.completed?"completed":"",children:[(0,n.jsx)("span",{children:e.text}),e.completed&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]},a)))})]})]}),(0,n.jsxs)("div",{className:"study-plan-section",children:[(0,n.jsx)("h2",{children:"Planifica\u021bi-v\u0103 Studiile"}),(0,n.jsxs)("div",{className:"study-plan-details",children:[(0,n.jsxs)("div",{className:"study-plan-field "+(N("desired_study_level")?"completed":""),children:[(0,n.jsxs)("label",{children:["Nivelul de Studiu Dorit:",N("desired_study_level")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_study_level)||"Nespecificat"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("preferred_study_field")?"completed":""),children:[(0,n.jsxs)("label",{children:["Domeniul de Studiu Preferat:",N("preferred_study_field")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_field)||"Nespecificat"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("desired_academic_year")?"completed":""),children:[(0,n.jsxs)("label",{children:["Anul Academic Dorit:",N("desired_academic_year")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_academic_year)||"Nespecificat"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("preferred_study_language")?"completed":""),children:[(0,n.jsxs)("label",{children:["Limba de Studiu Preferat\u0103:",N("preferred_study_language")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_language)||"Nespecificat\u0103"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("estimated_budget")?"completed":""),children:[(0,n.jsxs)("label",{children:["Buget Estimat:",N("estimated_budget")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:null!==a&&void 0!==a&&a.estimated_budget?`${a.estimated_budget} EUR`:"Nespecificat"})]}),(0,n.jsxs)("div",{className:"study-plan-field "+(N("accommodation_preferences")?"completed":""),children:[(0,n.jsxs)("label",{children:["Preferin\u021be Cazare:",N("accommodation_preferences")&&(0,n.jsx)("span",{className:"checkmark",children:"\u2713"})]}),(0,n.jsx)("span",{children:(null===a||void 0===a?void 0:a.accommodation_preferences)||"Nespecificate"})]})]}),(0,n.jsx)("button",{className:"edit-study-plan-button",onClick:()=>c(!0),children:"Editeaz\u0103 Planul de Studii"})]})]}),s&&(0,n.jsx)("div",{className:"edit-study-plan-modal",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("h2",{children:"Editeaz\u0103 Planul de Studii"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v()},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Nivelul de Studiu Dorit: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"desired_study_level",value:m.desired_study_level,onChange:y,className:p.desired_study_level?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Selecta\u021bi Nivelul"}),(0,n.jsx)("option",{value:"Bachelor",children:"Licen\u021b\u0103"}),(0,n.jsx)("option",{value:"Master",children:"Master"}),(0,n.jsx)("option",{value:"PhD",children:"Doctorat"})]}),p.desired_study_level&&(0,n.jsx)("span",{className:"error-message",children:p.desired_study_level})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Domeniul de Studiu Preferat: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"preferred_study_field",value:m.preferred_study_field,onChange:y,placeholder:"Introduce\u021bi domeniul de studiu",className:p.preferred_study_field?"error":""}),p.preferred_study_field&&(0,n.jsx)("span",{className:"error-message",children:p.preferred_study_field})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Anul Academic Dorit: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"text",name:"desired_academic_year",value:m.desired_academic_year,onChange:y,placeholder:"Introduce\u021bi anul academic",className:p.desired_academic_year?"error":""}),p.desired_academic_year&&(0,n.jsx)("span",{className:"error-message",children:p.desired_academic_year})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Limba de Studiu Preferat\u0103: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"preferred_study_language",value:m.preferred_study_language,onChange:y,className:p.preferred_study_language?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Selecta\u021bi Limba"}),(0,n.jsx)("option",{value:"English",children:"Englez\u0103"}),(0,n.jsx)("option",{value:"Romanian",children:"Rom\xe2n\u0103"}),(0,n.jsx)("option",{value:"Russian",children:"Rus\u0103"})]}),p.preferred_study_language&&(0,n.jsx)("span",{className:"error-message",children:p.preferred_study_language})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Buget Estimat (EUR): ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsx)("input",{type:"number",name:"estimated_budget",value:m.estimated_budget,onChange:y,placeholder:"Introduce\u021bi bugetul",min:"0",className:p.estimated_budget?"error":""}),p.estimated_budget&&(0,n.jsx)("span",{className:"error-message",children:p.estimated_budget})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Preferin\u021be Cazare: ",(0,n.jsx)("span",{className:"required",children:"*"})]}),(0,n.jsxs)("select",{name:"accommodation_preferences",value:m.accommodation_preferences,onChange:y,className:p.accommodation_preferences?"error":"",children:[(0,n.jsx)("option",{value:"",children:"Selecta\u021bi Preferin\u021ba"}),(0,n.jsx)("option",{value:"Dormitory",children:"C\u0103min"}),(0,n.jsx)("option",{value:"Private Apartment",children:"Apartament Privat"}),(0,n.jsx)("option",{value:"Shared Apartment",children:"Apartament Partajat"})]}),p.accommodation_preferences&&(0,n.jsx)("span",{className:"error-message",children:p.accommodation_preferences})]}),(0,n.jsxs)("div",{className:"modal-buttons",children:[(0,n.jsx)("button",{type:"submit",className:"save-button",children:"Salveaz\u0103"}),(0,n.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>c(!1),children:"Anuleaz\u0103"})]})]})]})})]})}}}]);
//# sourceMappingURL=796.6ab538d2.chunk.js.map