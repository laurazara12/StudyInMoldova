"use strict";(self.webpackChunkstudy_in_moldova=self.webpackChunkstudy_in_moldova||[]).push([[327],{327:(e,a,i)=>{i.r(a),i.d(a,{default:()=>l});var n=i(43),o=i(375),r=i(213),d=i(768),s=(i(637),i(579));const l=e=>{let{userData:a,onProfileUpdate:i}=e;const[l,t]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)({name:(null===a||void 0===a?void 0:a.name)||"",email:(null===a||void 0===a?void 0:a.email)||"",phone:(null===a||void 0===a?void 0:a.phone)||"",phone_code:(null===a||void 0===a?void 0:a.phone_code)||"+373",country_of_origin:(null===a||void 0===a?void 0:a.country_of_origin)||"",date_of_birth:(null===a||void 0===a?void 0:a.date_of_birth)||"",nationality:(null===a||void 0===a?void 0:a.nationality)||"",desired_study_level:(null===a||void 0===a?void 0:a.desired_study_level)||"",preferred_study_field:(null===a||void 0===a?void 0:a.preferred_study_field)||"",desired_academic_year:(null===a||void 0===a?void 0:a.desired_academic_year)||"",preferred_study_language:(null===a||void 0===a?void 0:a.preferred_study_language)||"",estimated_budget:(null===a||void 0===a?void 0:a.estimated_budget)||"",accommodation_preferences:(null===a||void 0===a?void 0:a.accommodation_preferences)||""}),[p,v]=(0,n.useState)({}),y=["Afghanistan","South Africa","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Myanmar","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Czech Republic","Chile","China","Cyprus","Ivory Coast","Colombia","Comoros","Congo","North Korea","South Korea","Costa Rica","Croatia","Cuba","Denmark","Djibouti","Dominica","Ecuador","Egypt","El Salvador","Switzerland","United Arab Emirates","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Philippines","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Equatorial Guinea","Guyana","Haiti","Honduras","India","Indonesia","Jordan","Iraq","Iran","Ireland","Iceland","Israel","Italy","Jamaica","Japan","Kazakhstan","Kenya","Kiribati","Kyrgyzstan","Kosovo","Kuwait","Laos","Lesotho","Latvia","Lebanon","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","North Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Morocco","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Mozambique","Namibia","Nauru","Nepal","Nicaragua","Niger","Nigeria","Norway","New Zealand","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Poland","Portugal","Qatar","United Kingdom","Central African Republic","Dominican Republic","Romania","Rwanda","Russia","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","S\xe3o Tom\xe9 and Pr\xedncipe","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Syria","Slovakia","Slovenia","Solomon Islands","Somalia","Spain","Sri Lanka","United States of America","Sudan","South Sudan","Sweden","Suriname","Tajikistan","Tanzania","Thailand","East Timor","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Ukraine","Uganda","Hungary","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],f=[{code:"+373",country:"Moldova"},{code:"+40",country:"Romania"},{code:"+380",country:"Ukraine"},{code:"+7",country:"Russia"},{code:"+375",country:"Belarus"},{code:"+359",country:"Bulgaria"},{code:"+381",country:"Serbia"},{code:"+385",country:"Croatia"},{code:"+386",country:"Slovenia"},{code:"+421",country:"Slovakia"},{code:"+420",country:"Czech Republic"},{code:"+48",country:"Poland"},{code:"+36",country:"Hungary"},{code:"+43",country:"Austria"},{code:"+49",country:"Germany"},{code:"+33",country:"France"},{code:"+39",country:"Italy"},{code:"+34",country:"Spain"},{code:"+351",country:"Portugal"},{code:"+30",country:"Greece"},{code:"+90",country:"Turkey"},{code:"+995",country:"Georgia"},{code:"+374",country:"Armenia"},{code:"+994",country:"Azerbaijan"},{code:"+7",country:"Kazakhstan"},{code:"+996",country:"Kyrgyzstan"},{code:"+992",country:"Tajikistan"},{code:"+998",country:"Uzbekistan"},{code:"+44",country:"United Kingdom"},{code:"+1",country:"United States and Canada"},{code:"+86",country:"China"},{code:"+81",country:"Japan"},{code:"+82",country:"South Korea"},{code:"+91",country:"India"},{code:"+61",country:"Australia"},{code:"+64",country:"New Zealand"},{code:"+27",country:"South Africa"},{code:"+20",country:"Egypt"},{code:"+212",country:"Morocco"},{code:"+234",country:"Nigeria"},{code:"+254",country:"Kenya"},{code:"+55",country:"Brazil"},{code:"+54",country:"Argentina"},{code:"+52",country:"Mexico"}];(0,n.useEffect)((()=>{l&&h({name:(null===a||void 0===a?void 0:a.name)||"",email:(null===a||void 0===a?void 0:a.email)||"",phone:(null===a||void 0===a?void 0:a.phone)||"",phone_code:(null===a||void 0===a?void 0:a.phone_code)||"+373",country_of_origin:(null===a||void 0===a?void 0:a.country_of_origin)||"",date_of_birth:(null===a||void 0===a?void 0:a.date_of_birth)||"",nationality:(null===a||void 0===a?void 0:a.nationality)||"",desired_study_level:(null===a||void 0===a?void 0:a.desired_study_level)||"",preferred_study_field:(null===a||void 0===a?void 0:a.preferred_study_field)||"",desired_academic_year:(null===a||void 0===a?void 0:a.desired_academic_year)||"",preferred_study_language:(null===a||void 0===a?void 0:a.preferred_study_language)||"",estimated_budget:(null===a||void 0===a?void 0:a.estimated_budget)||"",accommodation_preferences:(null===a||void 0===a?void 0:a.accommodation_preferences)||""})}),[l,a]),(0,n.useEffect)((()=>{if(l&&null!==a&&void 0!==a&&a.phone){const e=a.phone;let i="+373",n=e;for(const{code:a}of f)if(e.startsWith(a)){i=a,n=e.slice(a.length);break}h({...a,phone_code:i,phone:n})}}),[l,a]);const g=e=>{const{name:a,value:i}=e.target;h((e=>({...e,[a]:i}))),p[a]&&v((e=>({...e,[a]:""})))},_=async e=>{if(e.preventDefault(),(()=>{const e={};if(m.name||(e.name="Name is mandatory"),m.email||(e.email="Email is mandatory"),m.phone||(e.phone="Phone number is mandatory"),m.country_of_origin||(e.country_of_origin="Country is mandatory"),m.phone){const a=m.phone.replace(/^0+/,"");(a.length<8||a.length>15)&&(e.phone="Phone number must be between 8 and 15 digits"),/^\d+$/.test(a)||(e.phone="Phone number must contain only digits")}return v(e),0===Object.keys(e).length})())try{var a;u(!0);const e={...m,phone:m.phone_code+m.phone.replace(/^0+/,"")};delete e.phone_code;const n=await r.A.put(`${o.JR}/api/users/profile`,e,{headers:(0,o.z5)()});if(null===(a=n.data)||void 0===a||!a.success)throw new Error(n.data.message||"Error updating profile");if(d.oR.success("Profile updated successfully"),t(!1),i){const a={...n.data.data,phone:e.phone};i(a)}}catch(n){console.error("Error updating profile:",n),d.oR.error((0,o.hS)(n))}finally{u(!1)}};return(0,s.jsxs)("div",{className:"profile-tab",children:[(0,s.jsxs)("div",{className:"profile-info",children:[(0,s.jsx)("div",{className:"profile-header",children:(0,s.jsx)("h2",{children:"Personal Information"})}),(0,s.jsx)("button",{className:"edit-button",onClick:()=>t(!0),children:"Edit Profile"}),(0,s.jsxs)("div",{className:"info-grid",children:[(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Full Name:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.name)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Email:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.email)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Phone:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.phone)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Date of Birth:"}),(0,s.jsx)("span",{children:null!==a&&void 0!==a&&a.date_of_birth?new Date(a.date_of_birth).toLocaleDateString("en-US"):"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Country of Origin:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.country_of_origin)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Nationality:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.nationality)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Desired Study Level:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_study_level)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Preferred Study Field:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_field)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Desired Academic Year:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.desired_academic_year)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Preferred Study Language:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.preferred_study_language)||"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Estimated Budget:"}),(0,s.jsx)("span",{children:null!==a&&void 0!==a&&a.estimated_budget?`${a.estimated_budget} EUR`:"Not specified"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("label",{children:"Accommodation Preferences:"}),(0,s.jsx)("span",{children:(null===a||void 0===a?void 0:a.accommodation_preferences)||"Not specified"})]})]})]}),l?(0,s.jsx)("div",{className:"edit-modal",children:(0,s.jsxs)("div",{className:"edit-modal-content",children:[(0,s.jsx)("button",{className:"close-modal-button",onClick:()=>t(!1),children:"\xd7"}),(0,s.jsx)("h2",{children:"Edit Profile"}),(0,s.jsxs)("form",{onSubmit:_,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Personal Information"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Full Name: ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"name",value:m.name,onChange:g,required:!0,className:p.name?"error":""}),p.name&&(0,s.jsx)("span",{className:"error-message",children:p.name})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Email: ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("input",{type:"email",name:"email",value:m.email,onChange:g,required:!0,className:p.email?"error":""}),p.email&&(0,s.jsx)("span",{className:"error-message",children:p.email})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Phone: ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("div",{className:"phone-input-group",children:[(0,s.jsx)("select",{name:"phone_code",value:m.phone_code,onChange:g,className:"phone-code-select",children:f.map((e=>{let{code:a,country:i}=e;return(0,s.jsxs)("option",{value:a,children:[a," (",i,")"]},a)}))}),(0,s.jsx)("input",{type:"tel",name:"phone",value:m.phone,onChange:g,placeholder:"Phone number",className:p.phone?"error":""})]}),p.phone&&(0,s.jsx)("span",{className:"error-message",children:p.phone})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Country: ",(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsxs)("select",{name:"country_of_origin",value:m.country_of_origin,onChange:g,className:p.country_of_origin?"error":"",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select country"}),y.map((e=>(0,s.jsx)("option",{value:e,children:e},e)))]}),p.country_of_origin&&(0,s.jsx)("span",{className:"error-message",children:p.country_of_origin})]})]}),(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Academic Information"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Date of Birth:"}),(0,s.jsx)("input",{type:"date",name:"date_of_birth",value:m.date_of_birth,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Nationality:"}),(0,s.jsx)("input",{type:"text",name:"nationality",value:m.nationality,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Desired Study Level:"}),(0,s.jsx)("input",{type:"text",name:"desired_study_level",value:m.desired_study_level,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Preferred Study Field:"}),(0,s.jsx)("input",{type:"text",name:"preferred_study_field",value:m.preferred_study_field,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Desired Academic Year:"}),(0,s.jsx)("input",{type:"text",name:"desired_academic_year",value:m.desired_academic_year,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Preferred Study Language:"}),(0,s.jsx)("input",{type:"text",name:"preferred_study_language",value:m.preferred_study_language,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Estimated Budget (EUR):"}),(0,s.jsx)("input",{type:"number",name:"estimated_budget",value:m.estimated_budget,onChange:g})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Accommodation Preferences:"}),(0,s.jsx)("textarea",{name:"accommodation_preferences",value:m.accommodation_preferences,onChange:g})]})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{type:"submit",className:"save-button",disabled:c,children:c?"Saving...":"Save Changes"}),(0,s.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>t(!1),disabled:c,children:"Cancel"})]})]})]})}):null]})}}}]);
//# sourceMappingURL=327.459b6967.chunk.js.map